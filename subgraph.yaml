specVersion: 0.0.4
description: Subgraph for Vision v1 smart contracts on Polygon
repository: https://github.com/Vision-DAO/v1-subgraph
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Idea
    network: mumbai
    source:
      abi: Idea
      startBlock: 27802787
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Idea
      abis:
        - name: Idea
          file: ./value-tree/build/contracts/Idea.json
      eventHandlers:
        - event: IdeaRecorded(string)
          handler: handleIdeaRecorded
        - event: IdeaFunded(address, FundingRate)
          handler: handleIdeaFunded
        - event: ProposalRejected(address)
          handler: handleProposalRejected
        - event: FundingDispersed(address, FundingRate)
          handler: handleFundingDispersed
      file: ./src/mappings/idea.ts
  - kind: ethereum/contract
    name: Proposal
    network: mumbai
    source:
      abi: Proposal
      startBlock: 27802787
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Proposal
      abis:
        - name: Proposal
          file: ./value-tree/build/contracts/Prop.json
        eventHandlers:
          - event: NewProposal(Idea, address, string, uint256)
            handler: handleNewProposal
        callHandlers:
          - function: vote(uint256, FundingRate)
            handler: handleVote
        file: ./src/mappings/prop.ts
